%uczenie predyktora oe
clear all;
n=0; farx(n+1)=5.135668e+003; foe(n+1)=5.101357e+003; wspucz(n+1)=0.000000e+000; ng(n+1)=0.000000e+000;
%odnowa zmiennej metryki
n=1; farx(n+1)=3.717395e+003; foe(n+1)=3.546899e+003; krok(n+1)=2.652070e-004; ng(n+1)=7.720882e+003;
n=2; farx(n+1)=1.091095e+003; foe(n+1)=9.409865e+002; krok(n+1)=1.178557e-003; ng(n+1)=5.245420e+003;
n=3; farx(n+1)=1.152036e+003; foe(n+1)=6.619596e+002; krok(n+1)=2.044712e-004; ng(n+1)=7.124125e+003;
n=4; farx(n+1)=3.578065e+002; foe(n+1)=4.570051e+002; krok(n+1)=9.078303e-003; ng(n+1)=1.273452e+003;
n=5; farx(n+1)=2.147874e+002; foe(n+1)=4.082078e+002; krok(n+1)=2.594055e-004; ng(n+1)=2.295443e+003;
n=6; farx(n+1)=2.128625e+002; foe(n+1)=4.007735e+002; krok(n+1)=9.346411e-005; ng(n+1)=3.310051e+003;
n=7; farx(n+1)=1.764423e+002; foe(n+1)=3.867709e+002; krok(n+1)=8.897443e-004; ng(n+1)=2.633802e+003;
n=8; farx(n+1)=1.321190e+002; foe(n+1)=3.556728e+002; krok(n+1)=3.128460e-003; ng(n+1)=2.217627e+003;
n=9; farx(n+1)=1.271611e+002; foe(n+1)=3.366726e+002; krok(n+1)=1.323776e-003; ng(n+1)=2.502452e+003;
n=10; farx(n+1)=1.270724e+002; foe(n+1)=3.254201e+002; krok(n+1)=7.138862e-004; ng(n+1)=2.297503e+003;
n=11; farx(n+1)=1.266950e+002; foe(n+1)=3.040162e+002; krok(n+1)=2.563269e-004; ng(n+1)=2.954593e+003;
n=12; farx(n+1)=1.325320e+002; foe(n+1)=2.935324e+002; krok(n+1)=6.359070e-004; ng(n+1)=2.626475e+003;
n=13; farx(n+1)=1.357746e+002; foe(n+1)=2.829083e+002; krok(n+1)=1.525147e-003; ng(n+1)=1.755740e+003;
n=14; farx(n+1)=1.052758e+002; foe(n+1)=2.620982e+002; krok(n+1)=6.131265e-003; ng(n+1)=8.430278e+002;
n=15; farx(n+1)=6.592991e+001; foe(n+1)=2.345108e+002; krok(n+1)=2.595225e-003; ng(n+1)=1.214666e+003;
n=16; farx(n+1)=5.206483e+001; foe(n+1)=2.265649e+002; krok(n+1)=3.862984e-005; ng(n+1)=5.314880e+003;
n=17; farx(n+1)=4.755031e+001; foe(n+1)=2.238131e+002; krok(n+1)=7.625735e-004; ng(n+1)=8.585072e+003;
n=18; farx(n+1)=2.563605e+001; foe(n+1)=1.595025e+002; krok(n+1)=3.253129e-003; ng(n+1)=1.144045e+004;
n=19; farx(n+1)=2.507739e+001; foe(n+1)=1.581601e+002; krok(n+1)=1.720017e-005; ng(n+1)=7.596445e+003;
n=20; farx(n+1)=1.881210e+001; foe(n+1)=1.483644e+002; krok(n+1)=8.100612e-004; ng(n+1)=8.321145e+003;
n=21; farx(n+1)=1.623808e+001; foe(n+1)=1.269414e+002; krok(n+1)=3.729911e-004; ng(n+1)=1.153253e+004;
n=22; farx(n+1)=1.626310e+001; foe(n+1)=1.229736e+002; krok(n+1)=1.864955e-004; ng(n+1)=1.439103e+004;
n=23; farx(n+1)=1.768952e+001; foe(n+1)=1.100740e+002; krok(n+1)=3.271540e-003; ng(n+1)=1.423613e+004;
n=24; farx(n+1)=1.547514e+001; foe(n+1)=1.018802e+002; krok(n+1)=1.869031e-004; ng(n+1)=1.165561e+004;
n=25; farx(n+1)=1.573753e+001; foe(n+1)=9.966847e+001; krok(n+1)=2.893244e-004; ng(n+1)=5.555929e+003;
%odnowa zmiennej metryki
n=26; farx(n+1)=1.267458e+001; foe(n+1)=9.366709e+001; krok(n+1)=8.657728e-006; ng(n+1)=4.823360e+003;
n=27; farx(n+1)=1.280015e+001; foe(n+1)=9.238079e+001; krok(n+1)=5.521422e-006; ng(n+1)=2.300212e+003;
n=28; farx(n+1)=8.843639e+000; foe(n+1)=6.230649e+001; krok(n+1)=1.316664e-004; ng(n+1)=2.441304e+003;
n=29; farx(n+1)=9.862547e+000; foe(n+1)=5.121981e+001; krok(n+1)=9.144347e-005; ng(n+1)=5.174702e+003;
n=30; farx(n+1)=9.125052e+000; foe(n+1)=4.856408e+001; krok(n+1)=3.325065e-004; ng(n+1)=4.369164e+003;
n=31; farx(n+1)=7.297224e+000; foe(n+1)=3.920615e+001; krok(n+1)=1.317301e-003; ng(n+1)=6.043190e+003;
n=32; farx(n+1)=6.236751e+000; foe(n+1)=3.133257e+001; krok(n+1)=3.363588e-004; ng(n+1)=7.233489e+003;
n=33; farx(n+1)=5.300673e+000; foe(n+1)=2.746813e+001; krok(n+1)=5.890474e-004; ng(n+1)=3.679108e+003;
n=34; farx(n+1)=4.817189e+000; foe(n+1)=2.406899e+001; krok(n+1)=1.486486e-003; ng(n+1)=7.606479e+003;
n=35; farx(n+1)=4.731745e+000; foe(n+1)=2.331192e+001; krok(n+1)=5.580806e-004; ng(n+1)=3.186229e+003;
n=36; farx(n+1)=4.603482e+000; foe(n+1)=2.205491e+001; krok(n+1)=1.050435e-003; ng(n+1)=4.454205e+003;
n=37; farx(n+1)=4.413756e+000; foe(n+1)=2.013026e+001; krok(n+1)=2.220021e-003; ng(n+1)=1.476103e+003;
n=38; farx(n+1)=4.385093e+000; foe(n+1)=1.855686e+001; krok(n+1)=1.621288e-003; ng(n+1)=2.880329e+003;
n=39; farx(n+1)=4.057828e+000; foe(n+1)=1.578598e+001; krok(n+1)=1.997747e-003; ng(n+1)=2.616992e+003;
n=40; farx(n+1)=3.884801e+000; foe(n+1)=1.476156e+001; krok(n+1)=3.271540e-003; ng(n+1)=4.599212e+002;
n=41; farx(n+1)=3.802511e+000; foe(n+1)=1.408579e+001; krok(n+1)=1.186919e-003; ng(n+1)=1.682918e+003;
n=42; farx(n+1)=3.709870e+000; foe(n+1)=1.342148e+001; krok(n+1)=7.663457e-004; ng(n+1)=2.220650e+003;
n=43; farx(n+1)=3.427484e+000; foe(n+1)=1.262570e+001; krok(n+1)=4.258262e-003; ng(n+1)=1.271706e+003;
n=44; farx(n+1)=3.309381e+000; foe(n+1)=1.209997e+001; krok(n+1)=2.303305e-003; ng(n+1)=2.344092e+003;
n=45; farx(n+1)=3.131584e+000; foe(n+1)=1.158160e+001; krok(n+1)=3.334617e-003; ng(n+1)=1.830101e+003;
n=46; farx(n+1)=2.671437e+000; foe(n+1)=1.048078e+001; krok(n+1)=2.804162e-003; ng(n+1)=1.692438e+003;
n=47; farx(n+1)=2.287454e+000; foe(n+1)=9.611296e+000; krok(n+1)=7.671715e-003; ng(n+1)=1.440382e+003;
n=48; farx(n+1)=2.056334e+000; foe(n+1)=8.948653e+000; krok(n+1)=1.324250e-003; ng(n+1)=1.912265e+003;
n=49; farx(n+1)=1.945690e+000; foe(n+1)=8.657553e+000; krok(n+1)=1.945533e-003; ng(n+1)=1.217085e+003;
n=50; farx(n+1)=1.681680e+000; foe(n+1)=7.903597e+000; krok(n+1)=1.375044e-002; ng(n+1)=1.492435e+003;
%odnowa zmiennej metryki
n=51; farx(n+1)=1.675477e+000; foe(n+1)=7.844910e+000; krok(n+1)=2.644164e-006; ng(n+1)=6.855223e+002;
n=52; farx(n+1)=1.675863e+000; foe(n+1)=7.802319e+000; krok(n+1)=3.125120e-006; ng(n+1)=6.001149e+002;
n=53; farx(n+1)=1.681170e+000; foe(n+1)=7.492134e+000; krok(n+1)=3.728860e-005; ng(n+1)=3.646219e+002;
n=54; farx(n+1)=1.677467e+000; foe(n+1)=7.393130e+000; krok(n+1)=2.084136e-004; ng(n+1)=1.162483e+002;
n=55; farx(n+1)=1.686665e+000; foe(n+1)=7.104906e+000; krok(n+1)=1.711903e-004; ng(n+1)=2.065940e+002;
n=56; farx(n+1)=1.657900e+000; foe(n+1)=6.524994e+000; krok(n+1)=5.218301e-004; ng(n+1)=1.746948e+002;
n=57; farx(n+1)=1.614874e+000; foe(n+1)=6.013934e+000; krok(n+1)=4.258262e-003; ng(n+1)=1.786167e+002;
n=58; farx(n+1)=1.539144e+000; foe(n+1)=5.521425e+000; krok(n+1)=3.303815e-003; ng(n+1)=1.584719e+003;
n=59; farx(n+1)=1.530083e+000; foe(n+1)=5.293257e+000; krok(n+1)=1.402097e-003; ng(n+1)=1.311052e+003;
n=60; farx(n+1)=1.504099e+000; foe(n+1)=5.105751e+000; krok(n+1)=2.600877e-003; ng(n+1)=6.242452e+002;
n=61; farx(n+1)=1.482556e+000; foe(n+1)=4.875793e+000; krok(n+1)=2.660052e-003; ng(n+1)=8.508102e+002;
n=62; farx(n+1)=1.338577e+000; foe(n+1)=4.408546e+000; krok(n+1)=9.258382e-003; ng(n+1)=1.968588e+003;
n=63; farx(n+1)=1.293615e+000; foe(n+1)=4.286703e+000; krok(n+1)=1.006932e-003; ng(n+1)=1.219141e+003;
n=64; farx(n+1)=1.152558e+000; foe(n+1)=3.959829e+000; krok(n+1)=2.926191e-003; ng(n+1)=6.615963e+002;
n=65; farx(n+1)=1.093934e+000; foe(n+1)=3.820048e+000; krok(n+1)=1.032555e-002; ng(n+1)=1.266427e+003;
n=66; farx(n+1)=1.036402e+000; foe(n+1)=3.540961e+000; krok(n+1)=9.143281e-004; ng(n+1)=2.064052e+003;
n=67; farx(n+1)=9.645896e-001; foe(n+1)=3.384068e+000; krok(n+1)=1.109636e-002; ng(n+1)=2.501252e+002;
n=68; farx(n+1)=9.041857e-001; foe(n+1)=3.238494e+000; krok(n+1)=6.192369e-003; ng(n+1)=8.138649e+002;
n=69; farx(n+1)=8.061501e-001; foe(n+1)=3.075204e+000; krok(n+1)=5.999763e-003; ng(n+1)=5.708011e+002;
n=70; farx(n+1)=7.303107e-001; foe(n+1)=2.949058e+000; krok(n+1)=3.271540e-003; ng(n+1)=9.103835e+002;
n=71; farx(n+1)=6.415817e-001; foe(n+1)=2.772925e+000; krok(n+1)=4.001696e-003; ng(n+1)=1.004686e+003;
n=72; farx(n+1)=6.009284e-001; foe(n+1)=2.691774e+000; krok(n+1)=3.452691e-003; ng(n+1)=7.866991e+002;
n=73; farx(n+1)=5.040755e-001; foe(n+1)=2.479201e+000; krok(n+1)=1.961666e-002; ng(n+1)=4.576125e+002;
n=74; farx(n+1)=4.613596e-001; foe(n+1)=2.370944e+000; krok(n+1)=3.343359e-003; ng(n+1)=1.539951e+003;
n=75; farx(n+1)=4.434348e-001; foe(n+1)=2.330332e+000; krok(n+1)=4.702595e-003; ng(n+1)=6.895608e+002;
%odnowa zmiennej metryki
n=76; farx(n+1)=4.432262e-001; foe(n+1)=2.326836e+000; krok(n+1)=1.033699e-006; ng(n+1)=2.800636e+002;
n=77; farx(n+1)=4.420698e-001; foe(n+1)=2.316595e+000; krok(n+1)=1.085468e-005; ng(n+1)=1.706286e+002;
n=78; farx(n+1)=4.415540e-001; foe(n+1)=2.310950e+000; krok(n+1)=2.732928e-006; ng(n+1)=2.158387e+002;
n=79; farx(n+1)=4.432262e-001; foe(n+1)=2.289352e+000; krok(n+1)=4.430569e-004; ng(n+1)=3.547694e+001;
n=80; farx(n+1)=4.405440e-001; foe(n+1)=2.273660e+000; krok(n+1)=1.775639e-004; ng(n+1)=5.194477e+001;
n=81; farx(n+1)=4.408655e-001; foe(n+1)=2.268059e+000; krok(n+1)=9.345155e-005; ng(n+1)=4.685669e+001;
n=82; farx(n+1)=4.417799e-001; foe(n+1)=2.174448e+000; krok(n+1)=6.099924e-003; ng(n+1)=3.429029e+001;
n=83; farx(n+1)=4.465338e-001; foe(n+1)=2.133851e+000; krok(n+1)=2.018307e-003; ng(n+1)=4.681524e+002;
n=84; farx(n+1)=4.510197e-001; foe(n+1)=2.097993e+000; krok(n+1)=1.944438e-003; ng(n+1)=8.192658e+002;
n=85; farx(n+1)=4.302423e-001; foe(n+1)=2.048257e+000; krok(n+1)=1.417782e-002; ng(n+1)=3.347340e+002;
n=86; farx(n+1)=4.150073e-001; foe(n+1)=2.007495e+000; krok(n+1)=3.013180e-003; ng(n+1)=9.240448e+002;
n=87; farx(n+1)=4.088225e-001; foe(n+1)=1.988082e+000; krok(n+1)=3.334617e-003; ng(n+1)=1.988924e+002;
n=88; farx(n+1)=3.792857e-001; foe(n+1)=1.879956e+000; krok(n+1)=1.295158e-002; ng(n+1)=7.247248e+002;
n=89; farx(n+1)=3.702765e-001; foe(n+1)=1.821506e+000; krok(n+1)=1.251384e-002; ng(n+1)=2.873177e+002;
n=90; farx(n+1)=3.668140e-001; foe(n+1)=1.770336e+000; krok(n+1)=1.009503e-003; ng(n+1)=1.155980e+003;
n=91; farx(n+1)=3.620482e-001; foe(n+1)=1.734429e+000; krok(n+1)=1.982946e-003; ng(n+1)=3.927888e+002;
n=92; farx(n+1)=3.442969e-001; foe(n+1)=1.566391e+000; krok(n+1)=1.309024e-002; ng(n+1)=4.529545e+002;
n=93; farx(n+1)=3.463167e-001; foe(n+1)=1.531635e+000; krok(n+1)=5.557598e-003; ng(n+1)=6.083733e+002;
n=94; farx(n+1)=3.576416e-001; foe(n+1)=1.436515e+000; krok(n+1)=1.153579e-002; ng(n+1)=4.491614e+002;
n=95; farx(n+1)=3.636877e-001; foe(n+1)=1.402646e+000; krok(n+1)=3.442371e-003; ng(n+1)=5.006887e+002;
n=96; farx(n+1)=3.656792e-001; foe(n+1)=1.395095e+000; krok(n+1)=1.020148e-003; ng(n+1)=5.760937e+002;
n=97; farx(n+1)=3.587817e-001; foe(n+1)=1.226281e+000; krok(n+1)=4.171622e-002; ng(n+1)=5.281924e+002;
n=98; farx(n+1)=3.569285e-001; foe(n+1)=1.154508e+000; krok(n+1)=3.990929e-003; ng(n+1)=5.588530e+002;
n=99; farx(n+1)=3.478978e-001; foe(n+1)=1.061953e+000; krok(n+1)=8.875371e-003; ng(n+1)=1.224489e+003;
n=100; farx(n+1)=3.436517e-001; foe(n+1)=9.965511e-001; krok(n+1)=7.761346e-003; ng(n+1)=8.194015e+002;

figure; semilogy(farx,'b'); hold on; semilogy(foe,'r'); xlabel('Iteracje'); ylabel('Earx, Eoe'); legend('Earx','Eoe'); title('Uczenie predyktora OE'); grid on;
% print("blad_uczenie","-dpng","-r800")

figure; subplot(2,1,1); semilogy(krok); xlabel('Iteracje'); ylabel('Krok');
subplot(2,1,2); semilogy(ng); xlabel('Iteracje'); ylabel('Norma gradientu');
Earx=farx(n+1)
Eoe=foe(n+1)
